<html>
    <head>

        <script src="/dist/alpine.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" defer></script>

        <script>
            var model = {};

            (function(ctx) {
                ctx.New = function() {
                    return {
                        show: false,
                        open: false,
                        data: {},
                        init: function() {
                            this.data.items = [ { name: 'Item1', isActive: false }, { name: 'Item2', isActive: true }, { name: 'Item3', isActive: false } ];
                        }
                    };
                };
            })(model);
        </script>
    </head>
    <body>
        <script>
            function appendAlp() {
                document.body.insertAdjacentHTML(
                    'beforeend',
                    '<div x-data="{foo:1}"><span x-text="foo"></span></div>'
                );
            }
        </script>
        <a onclick="appendAlp()">test</a>
        <a href="">refresh</a>
            <div class="dropdown" x-data="model.New()" x-init="init()" x-bind:class="{ 'is-active': open }" x-on:click.away="open=false" id="dropdown" data-turbolinks-permanent="">
                <div class="dropdown-trigger">
                    <button x-on:click="open=!open" class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                        <span>Dropdown button</span>
                        <span class="icon is-small">
                            <i class="fas fa-angle-down" aria-hidden="true"></i>
                        </span>
                    </button>
                </div>
                <div class="dropdown-menu" id="dropdown-menu" role="menu">
                    <div class="dropdown-content">
                        <template x-for="item in data.items" :key="item">
                            <div>
                                <a href="#" class="dropdown-item" x-bind:class="{ 'is-active' : item.isActive }" x-text="item.name"></a>
                                <input>
                            </div>
                        </template>
                        <a @click="data.items.push({name: 'test', 'is-active': false})">test</a>
                    </div>
                </div>
            </div>
    </body>
</html>
